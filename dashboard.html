<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Dashboard Contamination</title>
<style>
#tagsContainer div {
  padding: 20px;
  margin: 10px;
  border-radius: 10px;
  color: #fff;
  display: inline-block;
}
</style>
</head>
<body>
<h1>Dashboard Contamination</h1>
<div id="tagsContainer"></div>

<script>
const binURL = "https://api.jsonbin.io/v3/b/6920c18ad0ea881f40f760fe";
const apiKey = "$2a$10$FYbI.UBUR9uUn20mH5/nAesXEm4NPygH2n0HPRBlgSa8j/VmI8LD2";

async function loadTags() {
  const res = await fetch(binURL, { headers: { "X-Master-Key": apiKey } });
  const data = await res.json();
  const container = document.getElementById("tagsContainer");
  container.innerHTML = "";

  for (const [id, state] of Object.entries(data.record)) {
    const div = document.createElement("div");
    div.textContent = id;
    div.style.backgroundColor = state === "sain" ? "#2ecc71" : "#e74c3c";
    container.appendChild(div);
  }
}

loadTags();
setInterval(loadTags, 5000); // actualisation toutes les 5 secondes
</script>
</body>
</html>
